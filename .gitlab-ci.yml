stages:
  - deploy

deploy_staging:
  stage: deploy
  tags:
    - shell
  script:
    - echo "üõ† –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π –Ω–∞ Staging..."
    - cd /root/staging
    - git fetch origin
    - git checkout develop
    - git reset --hard origin/develop
    - docker-compose pull
    - docker-compose up -d --build
    - echo "‚úÖ Staging –æ–±–Ω–æ–≤–ª—ë–Ω: https://staging.–∏–≥—Ä—ã–≤–µ–∫–æ–≤.—Ä—Ñ"
  only:
    - develop

deploy_production:
  stage: deploy
  tags:
    - shell
  script:
    - echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π –Ω–∞ Production..."
    - cd /root/app-prod
    - git fetch origin
    - git checkout main
    - git reset --hard origin/main
    - docker-compose pull
    - docker-compose up -d --build
    - echo "‚úÖ Production –æ–±–Ω–æ–≤–ª—ë–Ω: https://–∏–≥—Ä—ã–≤–µ–∫–æ–≤.—Ä—Ñ"
  only:
    - main